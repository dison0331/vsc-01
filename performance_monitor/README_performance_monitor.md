# Python性能监视器

一个功能完整的系统性能监视器，支持实时监控CPU、内存、磁盘和网络使用情况。

## 功能特性

- **CPU监控**: 实时显示CPU使用率、核心数和频率
- **内存监控**: 显示内存和交换分区的使用情况
- **磁盘监控**: 显示磁盘空间使用情况
- **网络监控**: 显示上传/下载速度和总流量
- **进程监控**: 显示占用CPU和内存最多的进程
- **数据导出**: 支持将历史数据导出为JSON格式
- **图形化界面**: 提供实时图表可视化

## 安装依赖

```bash
pip install -r requirements.txt
```

## 使用方法

### 1. 命令行版本

运行命令行版本的性能监视器：

```bash
python performance_monitor.py
```

功能：
- 实时显示系统性能指标（每2秒刷新）
- 显示占用资源最多的进程
- 按Ctrl+C退出并自动保存数据到`performance_log.json`

### 2. 图形化版本

运行图形化版本的性能监视器：

```bash
python performance_monitor_gui.py
```

功能：
- 使用matplotlib实时绘制性能曲线
- 显示CPU、内存、磁盘和网络的历史趋势
- 显示系统详细信息
- 关闭窗口退出程序

## 输出示例

### 命令行版本输出

```
================================================================================
性能监视器 - 2024-01-26 18:05:25
================================================================================

【CPU 使用率】
  使用率: 45.2%
  核心数: 8
  频率: 2400 MHz

【内存 使用率】
  总内存: 16.00 GB
  已使用: 12.34 GB (77.1%)
  可用: 3.66 GB
  交换分区: 2.56 GB / 8.00 GB

【磁盘 使用率】
  总空间: 512.00 GB
  已使用: 256.00 GB (50.0%)
  可用: 256.00 GB

【网络 流量】
  上传速度: 125.50 KB/s
  下载速度: 1024.75 KB/s
  总上传: 45.67 GB
  总下载: 234.56 GB

【CPU 占用最高的进程】
  1. PID: 1234   名称: python.exe         CPU: 25.6%
  2. PID: 5678   名称: chrome.exe         CPU: 12.3%

【内存 占用最高的进程】
  1. PID: 5678   名称: chrome.exe         内存: 15.2%
  2. PID: 9012   名称: code.exe           内存: 8.7%

================================================================================
按 Ctrl+C 退出
================================================================================
```

## 自定义配置

### 修改监控间隔

在代码中修改`interval`参数：

```python
# 命令行版本 - 修改监控间隔（秒）
monitor.monitor(interval=2)  # 每2秒更新一次

# 图形化版本 - 修改监控间隔（毫秒）
monitor.start(interval=1000)  # 每1秒更新一次
```

### 修改历史数据保留量

```python
# 保留最近120条记录
monitor = PerformanceMonitor(history_size=120)
```

## 数据导出

退出命令行版本时，会自动将历史数据保存到`performance_log.json`文件，包含：
- CPU使用率历史
- 内存使用率历史
- 磁盘使用率历史
- 网络流量历史

## 系统要求

- Python 3.6+
- Windows / Linux / macOS
- 依赖库：psutil, matplotlib

## 注意事项

1. 首次运行图形化版本时，可能需要几秒钟初始化matplotlib
2. 在某些Linux系统上，可能需要安装中文字体才能正确显示中文标签
3. 监控网络流量时，程序需要持续运行才能计算准确的速度

## 许可证

MIT License
